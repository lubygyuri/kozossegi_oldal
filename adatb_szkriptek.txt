CREATE TABLE felhasznalo (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    EMAIL VARCHAR2(60) NOT NULL,
    JELSZO CHAR(200) NOT NULL,
    VEZETEKNEV VARCHAR2(60) NOT NULL,
    KERESZTNEV VARCHAR2(60) NOT NULL,
    SZULETESI_DATUM DATE NOT NULL,
    NEME VARCHAR2(10) NOT NULL,
    ISKOLA VARCHAR2(100),
    MUNKAHELY VARCHAR2(100),
    CSATLAKOZAS_DATUMA DATE NOT NULL,
    PROFILKEP VARCHAR2(200)
);

CREATE TABLE fenykep_album (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    NEV VARCHAR2(100),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO)
);

CREATE TABLE fenykepek (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    KEP VARCHAR2(200) NOT NULL,
    TARHELY NUMBER NOT NULL,
    FENYKEP_ALBUM_AZONOSITO NUMBER REFERENCES fenykep_album (AZONOSITO)
);

CREATE TABLE adminok (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    EMAIL VARCHAR2(60) NOT NULL,
    JELSZO CHAR(200) NOT NULL
);

CREATE TABLE ismeros (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    STATUSZ SMALLINT, 
    FELHASZNALO1 NUMBER REFERENCES felhasznalo (AZONOSITO),
    FELHASZNALO2 NUMBER REFERENCES felhasznalo (AZONOSITO)
);

CREATE TABLE bejegyzes (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    UZENET VARCHAR2(2000) NOT NULL,
    LETREHOZAS_DATUMA DATE NOT NULL,
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    KEP NUMBER REFERENCES fenykepek (AZONOSITO)
);

CREATE TABLE bejegyzes_like (
    BEJEGYZES_AZONOSITO NUMBER NOT NULL REFERENCES bejegyzes (AZONOSITO),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    PRIMARY KEY (BEJEGYZES_AZONOSITO, FELHASZNALO_AZONOSITO)
);

CREATE TABLE komment (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    UZENET VARCHAR2(1000) NOT NULL,
    LETREHOZAS_DATUMA DATE NOT NULL,
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    BEJEGYZES_AZONOSITO NUMBER NOT NULL REFERENCES bejegyzes (AZONOSITO)
);

CREATE TABLE komment_like (
    KOMMENT_AZONOSITO NUMBER NOT NULL REFERENCES komment (AZONOSITO),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    PRIMARY KEY (KOMMENT_AZONOSITO, FELHASZNALO_AZONOSITO)
);

CREATE TABLE klub (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    NEV VARCHAR2(100),
    LEIRAS VARCHAR2(1000),
    LATHATOSAG SMALLINT DEFAULT 0,
    LETREHOZAS_DATUMA DATE NOT NULL,
    ADMIN_FELHASZNALO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO)
);

CREATE TABLE klub_tagok (
    KLUB_AZONOSITO NUMBER NOT NULL REFERENCES klub (AZONOSITO),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    PRIMARY KEY (KLUB_AZONOSITO, FELHASZNALO_AZONOSITO)
);

CREATE TABLE csoport (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    NEV VARCHAR2(30),
    ADMIN_FELHASZNALO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO)
);

CREATE TABLE csoport_tagok (
    CSOPORT_AZONOSITO NUMBER NOT NULL REFERENCES csoport (AZONOSITO),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    PRIMARY KEY (CSOPORT_AZONOSITO, FELHASZNALO_AZONOSITO)
);

CREATE TABLE uzenet (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    UZENET VARCHAR2(1000) NOT NULL,
    KULDES_DATUMA DATE NOT NULL,
    STATUSZ SMALLINT DEFAULT 0,
    KULDO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    FOGADO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    KEP NUMBER REFERENCES fenykepek (AZONOSITO)
);

CREATE TABLE csoport_uzenet (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    UZENET VARCHAR2(1000) NOT NULL,
    KULDES_DATUMA DATE NOT NULL,
    STATUSZ SMALLINT DEFAULT 0,
    KULDO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    CSOPORT_AZONOSITO NUMBER NOT NULL REFERENCES csoport (AZONOSITO)
);

CREATE TABLE klub_bejegyzes (
    AZONOSITO NUMBER PRIMARY KEY NOT NULL,
    UZENET VARCHAR2(2000) NOT NULL, 
    LETREHOZAS_DATUMA DATE NOT NULL,
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    KLUB_AZONOSITO NUMBER NOT NULL REFERENCES klub (AZONOSITO),
    KEP NUMBER REFERENCES fenykepek (AZONOSITO)
);

CREATE TABLE klub_bejegyzes_like (
    KLUB_BEJEGYZES_AZONOSITO NUMBER NOT NULL REFERENCES klub_bejegyzes (AZONOSITO),
    FELHASZNALO_AZONOSITO NUMBER NOT NULL REFERENCES felhasznalo (AZONOSITO),
    PRIMARY KEY (KLUB_BEJEGYZES_AZONOSITO, FELHASZNALO_AZONOSITO)
);